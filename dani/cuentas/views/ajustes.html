<!-- REEMPLAZA TODO EL CONTENIDO DE views/ajustes.html CON ESTE CÓDIGO -->

<div class="card card--no-bg accordion-wrapper">
    <!-- ================================================== -->
    <!-- GRUPO 1: CUENTA Y PREFERENCIAS                     -->
    <!-- ================================================== -->
    <details class="accordion" open>
        <summary>
            <h3 class="card__title" style="margin:0; padding: 0; color: var(--c-on-surface);">
                <span class="material-icons">account_circle</span>
                <span>Cuenta y Preferencias</span>
            </h3>
            <span class="material-icons accordion__icon">expand_more</span>
        </summary>
        <div class="accordion__content" style="padding: 0 var(--sp-2);">
            <div class="modal__list-item">
                <span>Correo Electrónico</span>
                <strong id="config-user-email" style="color: var(--c-on-surface-secondary); font-size: var(--fs-sm);">cargando...</strong>
            </div>
            <button class="modal__list-item" data-action="toggle-theme" style="width: 100%; border:none; background:none; cursor:pointer;">
                <span>Cambiar Tema</span>
                <span class="material-icons">palette</span>
            </button>
            <button class="modal__list-item" data-action="set-pin" style="width: 100%; border:none; background:none; cursor:pointer;">
                <span>Configurar PIN de Acceso Rápido</span>
                <span class="material-icons">pin</span>
            </button>
        </div>
    </details>

    <!-- ================================================== -->
    <!-- GRUPO 2: DATOS Y AUTOMACIONES                      -->
    <!-- ================================================== -->
    <details class="accordion" open>
        <summary>
            <h3 class="card__title" style="margin:0; padding: 0; color: var(--c-on-surface);">
                <span class="material-icons">table_view</span>
                <span>Datos y Automaciones</span>
            </h3>
            <span class="material-icons accordion__icon">expand_more</span>
        </summary>
        <div class="accordion__content" style="padding: 0 var(--sp-2);">
            <button class="modal__list-item" data-action="manage-cuentas" style="width: 100%; border:none; background:none; cursor:pointer;">
                <span>Gestionar Cuentas</span>
                <span class="material-icons">account_balance_wallet</span>
            </button>
            <button class="modal__list-item" data-action="manage-conceptos" style="width: 100%; border:none; background:none; cursor:pointer;">
                <span>Gestionar Conceptos</span>
                <span class="material-icons">label</span>
            </button>
        </div>
    </details>

    <!-- ================================================== -->
    <!-- GRUPO 3: INFORMES Y EXTRACTOS                      -->
    <!-- ================================================== -->
    <details id="acordeon-extracto_cuenta" class="accordion informe-acordeon" open>
        <summary>
            <h3 class="card__title" style="margin:0; padding: 0; color: var(--c-on-surface);">
                <span class="material-icons">wysiwyg</span>
                <span>Informes y Extractos</span>
            </h3>
            <span class="material-icons accordion__icon">expand_more</span>
        </summary>
        <div class="accordion__content" style="padding: var(--sp-3) var(--sp-4);">
            <div id="informe-content-extracto_cuenta">
                 <form id="informe-cuenta-form" novalidate>
                    <div class="form-group">
                        <label for="informe-cuenta-select" class="form-label">Selecciona una cuenta para generar su extracto:</label>
                        <select id="informe-cuenta-select" class="form-select" required></select>
                    </div>
                    <button type="submit" class="btn btn--primary btn--full">Generar Extracto</button>
                </form>
                <div id="informe-resultado-container" style="margin-top: var(--sp-4);"></div>
            </div>
        </div>
    </details>

    <!-- ================================================== -->
    <!-- GRUPO 4: COPIAS DE SEGURIDAD Y MANTENIMIENTO       -->
    <!-- ================================================== -->
    <details class="accordion">
        <summary>
            <h3 class="card__title" style="margin:0; padding: 0; color: var(--c-on-surface);">
                <span class="material-icons">settings_backup_restore</span>
                <span>Copia y Mantenimiento</span>
            </h3>
            <span class="material-icons accordion__icon">expand_more</span>
        </summary>
        <div class="accordion__content" style="padding: var(--sp-3) var(--sp-4); display: grid; grid-template-columns: 1fr 1fr; gap: var(--sp-3);">
            <button class="btn btn--secondary" data-action="import-data"><span class="material-icons" style="font-size: 16px;">upload</span>Importar (JSON)</button>
            <button class="btn btn--secondary" data-action="import-csv"><span class="material-icons" style="font-size: 16px;">upload_file</span>Importar (CSV)</button>
            <button class="btn btn--secondary" data-action="export-data"><span class="material-icons" style="font-size: 16px;">download</span>Exportar (JSON)</button>
            <button class="btn btn--secondary" data-action="export-csv"><span class="material-icons" style="font-size: 16px;">description</span>Exportar (CSV)</button>
            <button class="btn btn--secondary" data-action="recalculate-balances" style="grid-column: 1 / -1; margin-top: var(--sp-2); border-color: var(--c-warning); color: var(--c-warning);">
                <span class="material-icons" style="font-size: 16px;">sync_problem</span>
                Auditar y Recalcular Saldos
            </button>
        </div>
    </details>

    <!-- ================================================== -->
    <!-- GRUPO 5: ZONA DE PELIGRO                           -->
    <!-- ================================================== -->
    <details class="accordion">
        <summary>
            <h3 class="card__title" style="margin:0; padding: 0; color: var(--c-danger);">
                <span class="material-icons">warning_amber</span>
                <span>Zona de Peligro</span>
            </h3>
            <span class="material-icons accordion__icon">expand_more</span>
        </summary>
        <div class="accordion__content" style="padding: var(--sp-3) var(--sp-4); display: flex; flex-direction: column; gap: var(--sp-3);">
            <button class="btn btn--danger" data-action="logout">
                <span class="material-icons" style="font-size: 16px;">logout</span>
                Salir / Cerrar Sesión
            </button>
            <button class="btn btn--danger" data-action="delete-account" style="background: transparent; border-color: var(--c-danger); color: var(--c-danger);">
                <span class="material-icons" style="font-size: 16px;">delete_forever</span>
                Eliminar Cuenta Permanentemente
            </button>
        </div>
    </details>
</div>