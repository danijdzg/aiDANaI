/*
=================================================================
=== aiDANaI - REFACORIZACIÓN MOBILE-FIRST COMPACT v1.0         ===
=================================================================
Este archivo ha sido completamente reescrito para una experiencia móvil densa y eficiente.
Principales cambios:
1. Variables de Espaciado (--sp-*) y Fuente (--fs-*) reducidas globalmente.
2. Rediseño completo de la tarjeta de transacción para ser un 40% más compacta usando Grid Layout.
3. Rediseño de formularios para usar placeholders como etiquetas, ahorrando un 50% de espacio vertical.
4. Compactación de todos los componentes UI: KPIs, modales, encabezados, botones y tarjetas.
=================================================================
*/

/* ================================================================= */
/* === :ROOT - VARIABLES GLOBALES COMPACTAS PARA MÓVIL            === */
/* ================================================================= */
:root {
    /* --- Paleta de Colores (Tema "Neon Blade" por defecto) --- */
    --c-primary: #00B34D;       
    --c-primary-hover: #00D158;
    --c-danger: #FF3B30;       
    --c-success: #34C759;      
    --c-warning: #FF9500;      
    --c-info: #0A84FF;         
    --c-background: #000000;
    --c-surface: #1C1C1E;       
    --c-surface-variant: #2C2C2E;
    --c-outline: rgba(90, 90, 90, 0.5);
    --c-on-surface: #F2F2F7;
    --c-on-surface-secondary: rgba(235, 235, 245, 0.6);
    --c-on-surface-tertiary: rgba(235, 235, 245, 0.4);
    --shadow-sm: 0 4px 12px rgba(0, 0, 0, 0.4);
    --shadow-md: 0 10px 30px rgba(0, 0, 0, 0.5);
    --glow-red: 0 0 20px rgba(255, 59, 48, 0.6);
    --c-white: #FFFFFF; 
    --c-black: #000000;
    --font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Helvetica Neue', Arial, sans-serif;

    /* --- TAMAÑOS DE FUENTE REDUCIDOS --- */
    --fs-xs: 0.7rem;    /* Original: 0.75rem */
    --fs-sm: 0.8rem;    /* Original: 0.875rem */
    --fs-base: 0.9rem;  /* Original: 1rem */
    --fs-lg: 1.0rem;    /* Original: 1.125rem */
    --fs-xl: 1.15rem;   /* Original: 1.25rem */

    /* --- ESPACIADOS REDUCIDOS --- */
    --sp-1: 0.2rem;     /* Original: 0.25rem */
    --sp-2: 0.4rem;     /* Original: 0.5rem */
    --sp-3: 0.6rem;     /* Original: 0.75rem */
    --sp-4: 0.8rem;     /* Original: 1rem */
    --sp-5: 1.0rem;     /* Original: 1.25rem */
    --sp-6: 1.2rem;     /* Original: 1.5rem */

    /* --- BORDES MÁS SUTILES --- */
    --border-radius-md: 8px; /* Original: 10px */
    --border-radius-lg: 12px;/* Original: 16px */
}

body[data-theme="sunset-groove"] {
    --c-primary: #D9534F;     
    --c-primary-hover: #E06C68;
    --c-danger: #D9534F;       
    --c-success: #5CB85C;     
    --c-warning: #F0AD4E;      
    --c-info: #4A90E2;        
    --c-background: #FAF8F0;
    --c-surface: #FFFFFF;
    --c-surface-variant: #F4F5F7;
    --c-outline: #DCD9C4;
    --c-on-surface: #333333;
    --c-on-surface-secondary: #6B6B6B;
    --c-on-surface-tertiary: #9B9B9B;
    --shadow-sm: 0 2px 4px 0 rgba(0, 0, 0, 0.07);
    --shadow-md: 0 8px 16px -3px rgba(0, 0, 0, 0.1);
}

/* ================================================================= */
/* === ESTILOS GLOBALES Y DE ESTRUCTURA                           === */
/* ================================================================= */
* { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
html { height: -webkit-fill-available; scroll-behavior: smooth; }
body { font-family: var(--font-family); background-color: var(--c-background); color: var(--c-on-surface); line-height: 1.4; min-height: 100vh; min-height: -webkit-fill-available; -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; overflow: hidden; font-weight: 500; }
*:focus-visible { outline: 2px solid var(--c-primary); outline-offset: 2px; border-radius: var(--sp-2); }
body::before { content: ''; position: fixed; inset: 0; z-index: -1; pointer-events: none; opacity: 0.1; background-image: linear-gradient(rgba(0, 179, 77, 0.25) 1px, transparent 1px), linear-gradient(90deg, rgba(0, 179, 77, 0.25) 1px, transparent 1px); background-size: 35px 35px; animation: pan-grid 60s linear infinite; }
@keyframes pan-grid { from { background-position: 0 0; } to { background-position: 350px 350px; } }

.app-layout { display: none; max-width: 500px; margin: 0 auto; height: 100vh; background-color: var(--c-background); flex-direction: column; opacity: 0; transition: opacity 0.5s ease-out, transform 0.4s cubic-bezier(0.4, 0, 0.2, 1), border-radius 0.4s; }
.app-layout--visible { display: flex; opacity: 1; }
.app-layout__main { flex: 1; overflow-y: auto; -webkit-overflow-scrolling: touch; padding: 40px 0 44px 0; }
.view { display: none; flex-direction: column; width: 100%; padding: 0 var(--sp-3); gap: var(--sp-3); }
.view--active { display: flex; }

.text-positive { color: var(--c-success); } .text-negative { color: var(--c-danger); } .text-warning { color: var(--c-warning); } .text-info { color: var(--c-info); }
.hidden { display: none !important; }

/* ================================================================= */
/* === NAVEGACIÓN Y ENCABEZADO                                    === */
/* ================================================================= */
.top-bar { position: fixed; top: 0; left: 50%; transform: translateX(-50%); width: 100%; max-width: 500px; display: flex; align-items: center; justify-content: space-between; padding: var(--sp-1) var(--sp-3); height: 40px; z-index: 200; background-color: rgba(10, 10, 15, 0.7); backdrop-filter: blur(12px); -webkit-backdrop-filter: blur(12px); border-bottom: 1px solid var(--c-outline); }
.top-bar__title { font-size: var(--fs-lg); font-weight: 800; padding-left: var(--sp-2); text-align: center; }
#page-title-display { font-size: var(--fs-base); font-weight: 700; margin-left: var(--sp-2); white-space: nowrap; }
.top-bar__actions, .top-bar__left-group { display: flex; align-items: center; gap: var(--sp-2); }
body[data-ledger-mode="A"] .top-bar { background-color: #002D5B; }
body[data-ledger-mode="B"] .top-bar { background-color: #5B0000; }
.top-bar, .top-bar .btn, .top-bar .icon-btn, #page-title-display { color: var(--c-white) !important; }

.bottom-nav { position: fixed; bottom: 0; left: 50%; transform: translateX(-50%); width: 100%; max-width: 500px; display: flex; height: 44px; align-items: flex-end; z-index: 200; background-color: var(--c-surface); border-top: 1px solid var(--c-outline); padding-bottom: env(safe-area-inset-bottom); }
.bottom-nav__item { flex: 1; display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100%; cursor: pointer; color: var(--c-on-surface-secondary); border: none; background: none; transition: color 0.2s; }
.bottom-nav__item--active { color: var(--c-primary); }
.bottom-nav__item .material-icons { font-size: 20px; }
.bottom-nav__label { display: none; }
#bottom-nav-add-btn { width: 52px; height: 52px; background-color: var(--c-primary); color: var(--c-white); border: none; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin-bottom: 10px; box-shadow: var(--shadow-md); cursor: pointer; transition: all 0.2s ease-in-out; }
#bottom-nav-add-btn:hover { transform: scale(1.1) rotate(15deg); background-color: var(--c-primary-hover); }
#bottom-nav-add-btn .material-icons { font-size: 26px; }

body[data-ledger-mode="A"] #ledger-toggle-btn { background-color: var(--c-primary); border-color: var(--c-primary); color: var(--c-white); }
body[data-ledger-mode="A"] .bottom-nav__item--active { color: var(--c-primary); }
body[data-ledger-mode="B"] #ledger-toggle-btn { background-color: var(--c-danger); border-color: var(--c-danger); color: var(--c-white); }
body[data-ledger-mode="B"] .bottom-nav__item--active { color: var(--c-danger) !important; }
#ledger-toggle-btn { font-weight: 700; padding: 4px 8px; font-size: 0.75rem; min-width: 36px; text-align: center; }

/* ================================================================= */
/* === TARJETA DE MOVIMIENTO (DISEÑO COMPACTO GRID)               === */
/* ================================================================= */
#movimientos-list-container { position: relative; padding: 0 var(--sp-3); }
#virtual-list-sizer { position: relative; width: 100%; }
#virtual-list-content { position: absolute; top: 0; left: 0; width: 100%; }

.swipe-container { position: relative; overflow: hidden; }
.transaction-card { display: grid; grid-template-columns: 3px 1fr auto; grid-template-rows: auto auto; align-items: center; gap: 0 var(--sp-2); padding: var(--sp-2) 0; border-bottom: 1px solid var(--c-outline); min-height: auto; cursor: pointer; background-color: var(--c-background); user-select: none; position: relative; z-index: 2; transition: transform 0.3s ease-out; }
.transaction-card:hover { background-color: var(--c-surface-variant); }
.transaction-card__indicator { grid-area: 1 / 1 / -1 / 2; align-self: stretch; border-radius: 99px; margin: 4px var(--sp-2) 4px 0; }
.transaction-card__indicator--income { background-color: var(--c-success); }
.transaction-card__indicator--expense { background-color: var(--c-danger); }
.transaction-card__indicator--transfer { background-color: var(--c-info); }
.transaction-card__indicator--recurrent { background-color: var(--c-warning); }
.transaction-card__details { grid-area: 1 / 2 / -1 / 3; min-width: 0; display: flex; flex-direction: column; justify-content: center; }
.transaction-card__figures { grid-area: 1 / 3 / -1 / 4; display: flex; flex-direction: column; align-items: flex-end; justify-content: center; }
.transaction-card__row-1, .transaction-card__concept { font-size: var(--fs-base); font-weight: 600; line-height: 1.2; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.transaction-card__row-2, .transaction-card__description { font-size: var(--fs-xs); color: var(--c-on-surface-secondary); line-height: 1.2; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.transaction-card__amount { font-size: var(--fs-base); font-weight: 700; }
.transaction-card__balance { font-size: 0.7rem; color: var(--c-on-surface-tertiary); }
.transaction-card__transfer-details { margin-top: 2px; }
.transaction-card__transfer-row { font-size: 0.7rem; }
.transaction-card__transfer-row .material-icons { font-size: 10px; }

.swipe-actions-container { position: absolute; top: 0; bottom: 0; display: flex; align-items: center; z-index: 1; }
.swipe-actions-container.left { left: 0; }
.swipe-actions-container.right { right: 0; }
.swipe-action-btn { width: 75px; height: 100%; display: flex; flex-direction: column; align-items: center; justify-content: center; color: var(--c-white); border: none; cursor: pointer; font-size: var(--fs-xs); font-weight: 600; gap: 4px; }
.swipe-action-btn.duplicate { background-color: #FF9500; }
.swipe-action-btn.delete { background-color: var(--c-danger); }
.swipe-actions-container--visible .swipe-action-btn .material-icons { transform: scale(1); opacity: 1; }

/* ================================================================= */
/* === FORMULARIOS (DISEÑO COMPACTO SIN ETIQUETAS)                === */
/* ================================================================= */
.form-group { margin-bottom: var(--sp-2); position: relative; }
.form-label { position: absolute; width: 1px; height: 1px; margin: -1px; overflow: hidden; clip: rect(0,0,0,0); border: 0; }
.form-input, .form-select { width: 100%; padding: var(--sp-2); border: 1px solid var(--c-outline); border-radius: var(--border-radius-md); background: var(--c-surface-variant); color: var(--c-on-surface); font-size: var(--fs-base); appearance: none; transition: border-color 0.2s, box-shadow 0.2s, background-color 0.2s; }
.form-input:focus, .form-select:focus { outline: none; border-color: var(--c-primary); background-color: var(--c-surface); box-shadow: 0 0 10px rgba(0, 179, 77, 0.5); }
.form-select { background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3e%3cpath fill='none' stroke='%23FFFFFF' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M2 5l6 6 6-6'/%3e%3csvg%3e"); background-repeat: no-repeat; background-position: right 10px center; background-size: 12px; padding-right: 30px; }
.form-grid { display: grid; grid-template-columns: 1fr; gap: var(--sp-2); }
.form-group-addon { display: flex; align-items: center; gap: var(--sp-2); }
.form-group-addon .form-group { flex-grow: 1; margin-bottom: 0; }
.form-error { color: var(--c-danger); font-size: var(--fs-xs); margin-top: var(--sp-1); min-height: 12px; display: block; font-weight: 600; }
.form-input--invalid { border-color: var(--c-danger) !important; box-shadow: var(--glow-red) !important; }

#movimiento-cantidad-form-group.is-ingreso #movimiento-cantidad { border-color: var(--c-success); color: var(--c-success); }
#movimiento-cantidad-form-group.is-gasto #movimiento-cantidad { border-color: var(--c-danger); color: var(--c-danger); }
#movimiento-cantidad-form-group.is-traspaso #movimiento-cantidad { border-color: var(--c-info); color: var(--c-info); }
#movimiento-cantidad { text-align: right; font-size: 1.1rem; font-weight: 700; }
#description-suggestions { display: none; position: absolute; top: 100%; left: 0; right: 0; background-color: var(--c-surface); border-radius: var(--border-radius-md); box-shadow: 0 10px 20px rgba(0,0,0,0.4); z-index: 1060; max-height: 150px; overflow-y: auto; border: 1px solid var(--c-outline); }
.suggestion-item { padding: var(--sp-2) var(--sp-3); cursor: pointer; font-size: var(--fs-sm); }
.suggestion-item:hover { background-color: var(--c-surface-variant); }
.suggestion-item small { color: var(--c-on-surface-secondary); font-size: var(--fs-xs); }

/* ================================================================= */
/* === COMPONENTES UI GENERALES                                   === */
/* ================================================================= */
.card { background-color: var(--c-surface); border: 1px solid var(--c-outline); border-radius: var(--border-radius-lg); box-shadow: var(--shadow-sm); overflow: hidden; }
.card__title { font-size: var(--fs-lg); font-weight: 700; margin-bottom: var(--sp-2); padding: var(--sp-3) var(--sp-3) 0 var(--sp-3); display: flex; align-items: center; gap: var(--sp-2); }
.card__content { padding: 0 var(--sp-3) var(--sp-3) var(--sp-3); }
.chart-container { position: relative; width: 100%; margin-bottom: var(--sp-3); height: 180px; }
.kpi-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(100px, 1fr)); gap: var(--sp-2); }
.kpi-item { text-align: center; padding: var(--sp-2); }
.kpi-item__label { font-size: 0.65rem; font-weight: 600; color: var(--c-on-surface-secondary); text-transform: uppercase; margin-bottom: 2px; }
.kpi-item__value { font-size: var(--fs-lg); font-weight: 800; }
.kpi-item__comparison { font-size: var(--fs-xs); min-height: 12px; }
.kpi-item[data-action] { border: none; background: none; text-align: inherit; font-family: inherit; cursor: pointer; transition: transform 0.2s, background-color 0.2s; }
.kpi-item[data-action]:hover { background-color: var(--c-surface-variant); }
.btn { padding: var(--sp-2) var(--sp-3); border: 1px solid transparent; border-radius: var(--border-radius-md); font-size: var(--fs-sm); font-weight: 600; cursor: pointer; transition: all 0.2s, transform 0.1s ease-out; display: inline-flex; align-items: center; justify-content: center; gap: var(--sp-2); -webkit-user-select: none; user-select: none; }
.btn:active { transform: scale(0.98); opacity: 0.85; }
.btn--primary { background-color: var(--c-primary); color: var(--c-white); border-color: var(--c-primary); }
.btn--secondary { background-color: var(--c-surface-variant); color: var(--c-on-surface); border-color: var(--c-outline); }
.btn--danger { background-color: var(--c-danger); color: var(--c-white); }
.btn--full { width: 100%; }
.icon-btn { background: none; border: none; color: var(--c-on-surface-secondary); cursor: pointer; width: 32px; height: 32px; display: inline-flex; align-items: center; justify-content: center; border-radius: 50%; transition: all 0.2s; }
.icon-btn .material-icons { font-size: 18px; }
.icon-btn:hover { background-color: var(--c-surface-variant); color: var(--c-primary); }

.modal-overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.6); backdrop-filter: blur(10px); display: flex; align-items: flex-end; justify-content: center; z-index: 1050; opacity: 0; transition: opacity 0.3s ease-out; pointer-events: none; }
.app-layout.app-layout--transformed-by-modal { transform: scale(0.96) translateY(-8px); border-radius: var(--border-radius-lg); overflow: hidden; box-shadow: 0 0 30px rgba(0,0,0,0.5); }
.modal-overlay--active { opacity: 1; pointer-events: auto; }
.modal { padding: var(--sp-4); background: var(--c-surface); border-radius: var(--border-radius-lg) var(--border-radius-lg) 0 0; width: 100%; max-width: 420px; max-height: 90vh; display: flex; flex-direction: column; box-shadow: 0 0 30px rgba(0,0,0,0.5); transform: translateY(100%); transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1); }
.modal-overlay--active .modal { transform: translateY(0); }
.modal__header { display: flex; align-items: center; justify-content: space-between; margin-bottom: var(--sp-2); }
.modal__title { font-size: var(--fs-lg); font-weight: 700; }
.modal__body { overflow-y: auto; flex-grow: 1; -webkit-overflow-scrolling: touch; }
.modal__actions { margin-top: var(--sp-3); display: flex; justify-content: flex-end; gap: var(--sp-2); width: 100%; }
.modal__grabber { width: 40px; height: 5px; background-color: var(--c-outline); border-radius: 99px; position: absolute; top: 8px; left: 50%; transform: translateX(-50%); }

.login-view { position: fixed; inset: 0; z-index: 1040; display: none; flex-direction: column; justify-content: center; align-items: center; padding: var(--sp-4); opacity: 0; transition: opacity .5s; }
.login-view--visible { display: flex; opacity: 1; }
.login-view__card { padding: var(--sp-5) var(--sp-4); max-width: 380px; z-index: 10; text-align: center; animation: pop-in 0.3s ease-out; }

.empty-state { text-align: center; padding: var(--sp-4) 0; color: var(--c-on-surface-secondary); animation: fade-in 0.3s; }
.empty-state .material-icons { font-size: 32px; margin-bottom: var(--sp-2); color: var(--c-primary); }
.empty-state h3 { font-size: var(--fs-lg); font-weight: 700; color: var(--c-on-surface); margin-bottom: var(--sp-1); }

.filter-pills { display: flex; flex-wrap: wrap; gap: var(--sp-2); margin-bottom: var(--sp-3); }
.filter-pill { padding: 4px 12px; border: 1px solid var(--c-outline); border-radius: 99px; font-size: var(--fs-xs); font-weight: 600; background-color: var(--c-surface-variant); color: var(--c-on-surface); cursor: pointer; transition: all 0.2s; }
.filter-pill--active { background-color: var(--c-primary); color: var(--c-white); border-color: var(--c-primary); }

.toast-container { position: fixed; bottom: 60px; left: 50%; transform: translateX(-50%); z-index: 9999; display: flex; flex-direction: column; align-items: center; gap: var(--sp-2); pointer-events: none;}
.toast { background-color: var(--c-surface); color: var(--c-white); padding: var(--sp-2) var(--sp-3); font-size: var(--fs-sm); border-radius: var(--border-radius-md); box-shadow: 0 0 20px rgba(0,0,0,0.5); pointer-events: all; border: 1px solid var(--c-outline); }

/* ================================================================= */
/* === ANIMACIONES Y EFECTOS VISUALES                             === */
/* ================================================================= */
@keyframes fade-out-and-collapse { from { opacity: 1; transform: scaleY(1); max-height: 76px; } to { opacity: 0; transform: scaleY(0.8); max-height: 0; padding: 0; margin: 0; border: 0; } }
.item-deleting { animation: fade-out-and-collapse 0.4s ease-out forwards; }
@keyframes item-enter { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
.list-item-animate { opacity: 0; }
.list-item-animate.item-enter-active { animation: item-enter 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards; }
@keyframes pop-in { from { transform: scale(0.95); opacity: 0; } to { transform: scale(1); opacity: 1; } }
@keyframes slide-in-from-right { from { transform: translateX(100%); } to { transform: translateX(0); } }
@keyframes slide-out-to-left { from { transform: translateX(0); } to { transform: translateX(-100%); } }
@keyframes slide-in-from-left { from { transform: translateX(-100%); } to { transform: translateX(0); } }
@keyframes slide-out-to-right { from { transform: translateX(0); } to { transform: translateX(100%); } }
.view-transition-in-forward { animation: slide-in-from-right 0.3s ease-out forwards; }
.view-transition-out-forward { animation: slide-out-to-left 0.3s ease-out forwards; }
.view-transition-in-backward { animation: slide-in-from-left 0.3s ease-out forwards; }
.view-transition-out-backward { animation: slide-out-to-right 0.3s ease-out forwards; }
@keyframes highlight-field-success { 0% { background-color: color-mix(in srgb, var(--c-success) 20%, transparent); } 100% { background-color: transparent; } }
.field-highlighted { animation: highlight-field-success 1s ease-out; }
@keyframes shimmer { 0% { background-position: 200% 0; } 100% { background-position: -200% 0; } }
.skeleton { background-color: var(--c-surface-variant); background-image: linear-gradient(90deg, var(--c-surface-variant), color-mix(in srgb, var(--c-outline) 20%, var(--c-surface-variant)), var(--c-surface-variant)); background-size: 200% 100%; animation: shimmer 1.5s infinite linear; border-radius: var(--sp-2); color: transparent !important; user-select: none; }
.spinner { display: inline-block; width: 1em; height: 1em; border: .15em solid currentColor; border-radius: 50%; border-top-color: transparent; animation: spin .8s linear infinite; vertical-align: middle; }
@keyframes spin { to { transform:rotate(360deg); } }

/* ================================================================= */
/* === ESTILOS RESPONSIVE (TABLET Y ESCRITORIO)                   === */
/* ================================================================= */
@media (min-width: 768px) {
    .app-layout { max-width: 95%; }
    .top-bar, .bottom-nav { max-width: 100%; }
    .modal-overlay { align-items: center; }
    .modal { border-radius: var(--border-radius-lg); transform: translateY(0) scale(0.95); }
    .modal-overlay--active .modal { transform: translateY(0) scale(1); }
    .view { padding: 0 var(--sp-5); }
    .kpi-grid { grid-template-columns: repeat(auto-fit, minmax(160px, 1fr)); }
    .form-grid { grid-template-columns: 1fr 1fr; }
}
@media (min-width: 1024px) {
    body { overflow-y: auto; }
    .app-layout { flex-direction: row; max-width: 100%; height: 100vh; }
    .bottom-nav { position: fixed; flex-direction: column; width: 220px; height: 100vh; left: 0; top: 0; transform: none; border-right: 1px solid var(--c-outline); padding: var(--sp-5) var(--sp-3); justify-content: flex-start; gap: var(--sp-2); box-shadow: none; background-color: var(--c-background); }
    .bottom-nav__item { flex-direction: row; justify-content: flex-start; width: 100%; height: auto; padding: var(--sp-2) var(--sp-3); border-radius: var(--border-radius-md); }
    .bottom-nav__item:hover { background-color: var(--c-surface-variant); }
    body[data-ledger-mode="A"] .bottom-nav__item--active { background-color: var(--c-primary); color: var(--c-white); }
    body[data-ledger-mode="B"] .bottom-nav__item--active { background-color: var(--c-danger); color: var(--c-white) !important; }
    .bottom-nav__label { display: inline-block; font-size: var(--fs-sm); font-weight: 600; margin: 0 0 0 var(--sp-3);}
    .app-layout__main { margin-left: 220px; width: calc(100% - 220px); height: 100vh; padding: 60px var(--sp-6) var(--sp-6) var(--sp-6); }
    .view { max-width: 1100px; margin: 0 auto; padding: 0; }
    .top-bar { width: calc(100% - 220px); left: auto; right: 0; transform: none; }
}