<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>aiDANaI - All in One</title>
    
    <!-- Enlaces a Fuentes Externas -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@1,400;1,500&family=Poppins:wght@400;500&family=Archivo+Narrow:wght@400;500;700&family=Roboto:wght@300;400;500;700&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    
    <!-- Enlace a tu hoja de estilos local -->
    <link rel="stylesheet" href="css/style.css">

    <!-- Metadatos para PWA y Dispositivos Apple -->
    <meta name="theme-color" content="#000000">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link rel="apple-touch-icon" href="assets/aiDANaI.webp">
</head>
<body>
    <!-- 
      CONTENEDOR DE LA SECCI√ìN DEL MEN√ö PRINCIPAL
    -->
    <div id="seccion-menu" class="main-section">
        <div class="starry-background">
            <div class="stars"></div><div class="stars2"></div><div class="stars3"></div><div class="stars4"></div>
            <div class="nebula-background"></div><div class="nebula-foreground"></div>
            <div class="planet gas-giant"></div><div class="planet rocky-planet"></div>
        </div>
        <div id="menu-flash-overlay"></div>
        <div id="menu-intro-screen" class="screen active">
            <div id="menu-intro-container">
                <div id="menu-intro-logo-wrapper">
                     <img src="assets/aiDANaI.webp" alt="Logo aiDANaI" class="cosmic-logo" id="menu-intro-image">
                </div>
                <div id="menu-explosion-container"></div>
            </div>
        </div>
        <div id="menu-main-screen" class="screen">
            <main id="menu-quote-container" aria-live="polite" aria-atomic="true">
                <p id="menu-quote-text"></p>
                <p id="menu-quote-author"></p>
            </main>
            <nav id="menu-bottom-nav">
                <button class="nav-button" id="menu-agenda-btn" aria-label="Abrir Agenda">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" class="icon"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></svg>
                    <span class="label">Agenda</span>
                </button>
                <button class="nav-button" id="menu-cuentas-btn" aria-label="Abrir Cuentas">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" class="icon"><path d="M21 12V7H5a2 2 0 0 1-2-2V3h14v4h4z"></path><path d="M3 5v14a2 2 0 0 0 2 2h16v-6h-4a2 2 0 0 1-2-2V7Z"></path><path d="M21 12v6"></path></svg>
                    <span class="label">Cuentas</span>
                </button>
                <button class="nav-button" id="menu-salir-btn" aria-label="Salir de la aplicaci√≥n">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" class="icon"><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path><polyline points="16 17 21 12 16 7"></polyline><line x1="21" y1="12" x2="9" y2="12"></line></svg>
                    <span class="label">Salir</span>
                </button>
            </nav>
        </div>
        <div id="menu-exit-screen" class="screen">
            <h2 id="menu-exit-message">Hasta la pr√≥xima...</h2>
        </div>
    </div>

    <!-- 
      CONTENEDOR DE LA SECCI√ìN DE LA AGENDA
    -->
    <div id="seccion-agenda" class="main-section">
        <div id="agenda-welcomeScreen" class="intro-screen"><img src="assets/aiDANaI.webp" id="agenda-welcomeImage" alt="Logo Agenda aiDANaI"></div>
        <div id="agenda-quoteScreen" class="intro-screen"><p id="agenda-quoteText"></p><span id="agenda-quoteAuthor"></span></div>
        <div id="agenda-login-screen" class="login-view">
            <div class="login-view__card">
                <h2 class="login-view__title">üóìÔ∏è Agenda aiDANaI</h2>
                <form id="agenda-login-form" novalidate>
                    <div class="form-group"><input type="email" id="agenda-login-email" class="form-input" placeholder="Correo electr√≥nico" required></div>
                    <div class="form-group"><input type="password" id="agenda-login-password" class="form-input" placeholder="Contrase√±a" required></div>
                    <div style="display: flex; gap: 12px; margin-top: 16px;">
                        <button type="button" data-action="login" class="btn btn-primary" style="flex: 1;">Iniciar Sesi√≥n</button>
                        <button type="button" data-action="register" class="btn btn-secondary" style="flex: 1;">Registrarse</button>
                    </div>
                </form>
            </div>
        </div>
        <div id="agenda-app-root">
            <nav class="bottom-nav">
                <button class="nav-item" data-view="home" title="Volver al Men√∫ Principal"><span class="material-icons">apps</span></button>
                <button class="nav-item active" data-view="today" title="Hoy"><span class="material-icons">home</span></button>
                <button class="nav-item" data-view="calendar" title="Agenda"><span class="material-icons">calendar_today</span></button>
                <button class="nav-item" data-view="tasks" title="Tareas"><span class="material-icons">task_alt</span></button>
                <button class="nav-item" data-view="help" title="Ayuda"><span class="material-icons">help_outline</span></button>
                <button class="nav-item" id="agenda-nav-theme-btn" title="Cambiar Tema"><span class="material-icons">brightness_6</span></button>
                <button class="nav-item" data-action="logout" title="Salir de la App"><span class="material-icons">logout</span></button>
            </nav>
            <main class="main-content" id="agenda-main-content-area">
                <div id="agenda-todayView" class="view active"></div>
                <div id="agenda-calendarView" class="view"></div>
                <div id="agenda-tasksView" class="view"></div>
                <div id="agenda-searchView" class="view"></div>
                <div id="agenda-helpView" class="view"></div>
            </main>
            <button id="agenda-fab-add-item" class="fab" title="A√±adir √≠tem"><span class="material-icons">add</span></button>
        </div>
        <!-- Modales de la Agenda -->
        <div id="agenda-quick-add-modal" class="modal-overlay"></div>
        <div id="agenda-add-item-modal" class="modal-overlay"></div>
        <div id="agenda-manage-lists-modal" class="modal-overlay"></div>
        <div id="agenda-date-picker-modal" class="modal-overlay"></div>
        <div id="agenda-toast-container"></div>
        <div id="agenda-custom-confirm-modal" class="modal-overlay"></div>
    </div>

    <!-- 
      CONTENEDOR DE LA SECCI√ìN DE CONTABILIDAD
    -->
    <div id="seccion-cuentas" class="main-section">
        <noscript>You need to enable JavaScript to run this app.</noscript>
        <div id="cuentas-introScreen" class="intro-screen">
             <div class="starry-background"></div>
            <img id="cuentas-splashImage" class="intro-screen__logo" src="assets/aiDANaI.webp" alt="Logo App" />
            <div id="cuentas-quoteContainer" class="intro-screen__quote-container">
                <p id="cuentas-quoteText" class="intro-screen__quote-text"></p>
                <span id="cuentas-quoteAuthor" class="intro-screen__quote-author"></span>
            </div>
        </div>
        <div id="cuentas-login-screen" class="login-view">
            <div class="login-view__card">
                <h2 id="cuentas-login-title" class="login-view__title">üí∞ Cuentas aiDANaI</h2>
                <form id="cuentas-login-form" noValidate>
                    <div class="form-group"><input type="email" id="cuentas-login-email" class="form-input" placeholder="Correo electr√≥nico" required autoComplete="email" autoCapitalize="none" /><span class="form-error" id="cuentas-login-email-error"></span></div>
                    <div class="form-group"><input type="password" id="cuentas-login-password" class="form-input" placeholder="Contrase√±a" required autoComplete="current-password" /><span class="form-error" id="cuentas-login-password-error"></span></div>
                    <div class="form-grid" style="margin-top: 16px;">
                        <button type="button" data-action="login" class="btn btn--primary">Iniciar Sesi√≥n</button>
                        <button type="button" data-action="register" class="btn btn--secondary">Registrarse</button>
                    </div>
                    <p id="cuentas-login-error" class="form-error" style="min-height: 16px; margin-top: 8px;"></p>
                </form>
            </div>
        </div>
        <div id="cuentas-app-root" class="app-layout">
            <nav class="bottom-nav">
                <button class="bottom-nav__item" data-action="navigate" data-page="home" title="Volver al Men√∫ Principal"><span class="material-icons">apps</span><span class="bottom-nav__label">Men√∫</span></button>
                <button data-action="navigate" data-page="movimientos-page" class="bottom-nav__item"><span class="material-icons">swap_horiz</span><span class="bottom-nav__label">Movimientos</span></button>
                <button data-action="navigate" data-page="panel-control-page" class="bottom-nav__item"><span class="material-icons">dashboard</span><span class="bottom-nav__label">Panel</span></button>
                <button data-action="navigate" data-page="cuentas-page" class="bottom-nav__item"><span class="material-icons">account_balance_wallet</span><span class="bottom-nav__label">Cuentas</span></button>
                <button data-action="navigate" data-page="inversiones-page" class="bottom-nav__item"><span class="material-icons">trending_up</span><span class="bottom-nav__label">Portafolio</span></button>
                <button data-action="navigate" data-page="presupuestos-page" class="bottom-nav__item"><span class="material-icons">pie_chart</span><span class="bottom-nav__label">Presupuestos</span></button>
                <button data-action="navigate" data-page="configuracion-page" class="bottom-nav__item"><span class="material-icons">settings</span><span class="bottom-nav__label">Ajustes</span></button>
            </nav>
            <header id="cuentas-app-top-bar" class="top-bar">
                <div id="cuentas-top-bar-left-button" class="top-bar__left-button"></div>
                <h1 id="cuentas-top-bar-title" class="top-bar__title"></h1>
                <div id="cuentas-top-bar-actions" class="top-bar__actions"></div>
            </header>
            <main class="app-layout__main">
                <section id="cuentas-panel-control-page" class="view"></section>
                <section id="cuentas-movimientos-page" class="view" style="padding: 0; gap: 0;"></section>
                <section id="cuentas-inversiones-page" class="view"></section>
                <section id="cuentas-cuentas-page" class="view"></section>
                <section id="cuentas-presupuestos-page" class="view"></section>
                <section id="cuentas-informes-page" class="view"></section>
                <section id="cuentas-configuracion-page" class="view"></section>
            </main>
            <button data-action="add-movement" id="cuentas-fab-add-movimiento" class="fab" title="A√±adir Movimiento" aria-label="A√±adir Movimiento"><span class="material-icons">add</span></button>
        </div>
        <!-- Modales de Cuentas -->
        <div id="cuentas-toast-container" aria-live="assertive"></div>
        <div id="cuentas-movimiento-modal" class="modal-overlay"></div>
        <div id="cuentas-generic-modal" class="modal-overlay"></div>
        <div id="cuentas-dashboard-config-modal" class="modal-overlay"></div>
        <div id="cuentas-manage-investment-accounts-modal" class="modal-overlay"></div>
        <div id="cuentas-valoracion-modal" class="modal-overlay"></div>
        <div id="cuentas-aportacion-modal" class="modal-overlay"></div>
        <div id="cuentas-calculator-modal" class="modal-overlay calculator-overlay"></div>
        <div id="cuentas-global-search-modal" class="modal-overlay"></div>
        <div id="cuentas-onboarding-tour" class="onboarding-overlay"></div>
        <div id="cuentas-exit-screen"></div>
    </div>
    
    <!-- SCRIPTS DE LIBRER√çAS EXTERNAS (con 'defer' para carga ordenada) -->
    <script defer src="https://www.gstatic.com/firebasejs/9.15.0/firebase-app-compat.js"></script>
    <script defer src="https://www.gstatic.com/firebasejs/9.15.0/firebase-auth-compat.js"></script>
    <script defer src="https://www.gstatic.com/firebasejs/9.15.0/firebase-firestore-compat.js"></script>
    <script defer src="https://cdnjs.cloudflare.com/ajax/libs/hammer.js/2.0.8/hammer.min.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <script defer src="https://npmcdn.com/flatpickr/dist/l10n/es.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/driver.js@1.0.1/dist/driver.js.iife.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/date-fns@2.29.3/cdn.min.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.2.0"></script>

    <!-- Enlace a tu archivo de l√≥gica local (con 'defer' para que se ejecute al final) -->
    <script defer src="js/app.js"></script>
</body>
</html>